service: ${env:APP_SERVICE_NAME}
variablesResolutionMode: 20210219
useDotenv: true

plugins:
  - serverless-offline
  - serverless-plugin-typescript
  - serverless-plugin-optimize
  - serverless-pseudo-parameters

provider:
  name: aws
  runtime: nodejs12.x
  region: ${env:AWS_REGION}
  stage: ${opt:stage,'dev'}
  lambdaHashingVersion: 20201221
  apiGateway:
    shouldStartNameWithService: true

functions:
  add:
    handler: src/add/add.sync
    events:
      - http:
          path: calcs/add
          method: post
  add_async:
    handler: src/add/add.async
    events:
      - http:
          path: calcs/async/add
          method: post
          async: true
  simplePayroll:
    handler: src/simplePayroll/simplePayroll.sync
    events:
      - http:
          path: calcs/simplePayroll
          method: post
  thirteenthMonth:
    handler: src/thirteenthMonth/thirteenthMonth.sync
    events:
      - http:
          path: calcs/thirteenthMonth
          method: post
